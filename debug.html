<\!DOCTYPE html>
<html>
<head>
    <title>Debug AI Events</title>
</head>
<body>
    <h1>AI Events Debug</h1>
    <div id="status">Loading...</div>
    <div id="eventCount">Events: 0</div>
    <div id="eventList"></div>

    <script>
        const eventFiles = [
            'conferences.json',
            'ai_summit_brasil_sp_2025.json',
            'neurips_2025.json',
            'icml_2025.json'
        ];

        async function debugLoadEvents() {
            const statusDiv = document.getElementById('status');
            const eventCountDiv = document.getElementById('eventCount');
            const eventListDiv = document.getElementById('eventList');
            
            statusDiv.innerHTML = 'Loading events...';
            
            let allEvents = [];
            
            for (const filename of eventFiles) {
                try {
                    statusDiv.innerHTML = `Loading ${filename}...`;
                    const response = await fetch(`events/${filename}`);
                    if (response.ok) {
                        const data = await response.json();
                        
                        // Handle different data structures
                        if (filename === "conferences.json" && data.ai_conferences_2025) {
                            // Transform conferences.json nested structure  
                            const transformed = data.ai_conferences_2025.map(conf => ({
                                event_name: conf.name,
                                event_type: "conference",
                                date: {
                                    start: conf.dates?.start,
                                    end: conf.dates?.end
                                },
                                location: {
                                    city: conf.location?.city,
                                    country: conf.location?.country,
                                    venue: conf.location?.venue
                                },
                                format: "presential",
                                description: conf.description,
                                focus_areas: conf.topics || [],
                                tags: conf.topics ? conf.topics.slice(0, 5) : []
                            }));
                            allEvents.push(...transformed);
                            console.log(`Loaded ${transformed.length} events from ${filename}`);
                        } else if (data.name && data.dates && \!data.event_name) {
                            // Transform individual conference file structure
                            const transformed = {
                                event_name: data.name,
                                event_type: data.type || "conference",
                                date: {
                                    start: data.dates?.start,
                                    end: data.dates?.end
                                },
                                location: {
                                    city: data.location?.city,
                                    country: data.location?.country,
                                    venue: data.location?.venue
                                },
                                format: "presential",
                                description: data.description,
                                focus_areas: data.activities || [],
                                target_audience: data.target_audience || [],
                                tags: data.tags || [],
                                registration: data.registration
                            };
                            allEvents.push(transformed);
                            console.log(`Loaded 1 event from ${filename}: ${data.name}`);
                        } else if (data.event_name) {
                            allEvents.push(data);
                            console.log(`Loaded 1 event from ${filename}: ${data.event_name}`);
                        }
                    } else {
                        console.error(`Failed to load ${filename}: ${response.status}`);
                    }
                } catch (error) {
                    console.error(`Error loading ${filename}:`, error);
                }
            }
            
            eventCountDiv.innerHTML = `Events: ${allEvents.length}`;
            statusDiv.innerHTML = `Loaded ${allEvents.length} events successfully\!`;
            
            eventListDiv.innerHTML = allEvents.slice(0, 10).map(event => `
                <div style="border: 1px solid #ccc; padding: 10px; margin: 5px;">
                    <h3>${event.event_name}</h3>
                    <p>Type: ${event.event_type}</p>
                    <p>Date: ${event.date?.start} - ${event.date?.end}</p>
                    <p>Location: ${event.location?.city}, ${event.location?.country}</p>
                </div>
            `).join('');
        }

        debugLoadEvents();
    </script>
</body>
</html>
EOF < /dev/null